# bootc-image-builder configuration
# Generated by Ansible - do not edit manually

[customizations.installer.kickstart]
contents = """
{{ bootc_image_installer_mode }}

keyboard {{ bootc_image_keyboard }}
lang {{ bootc_image_lang }}
timezone {{ bootc_image_timezone }} --utc

bootloader --append="{{ bootc_image_kernel_args }}"

{% if not bootc_image_use_all_disks | bool %}
ignoredisk --only-use=disk/by-id/{{ bootc_image_target_disk_id }}
{% endif %}
clearpart --all --initlabel --disklabel=gpt
autopart --type=lvm --fstype={{ bootc_image_rootfs }}

authselect --passalgo=sha512 --useshadow
rootpw --lock
user --name={{ bootc_image_user_name }} --groups={{ bootc_image_user_groups | join(',') }} --iscrypted --password={{ _bootc_image_password_hash }}

network --bootproto=dhcp --activate --hostname={{ bootc_image_hostname }}
services --enabled=sshd

{{ bootc_image_shutdown_command }}
"""
